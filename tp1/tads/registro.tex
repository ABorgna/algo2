\section{TAD \tadNombre{Registro}}

\begin{tad}{\tadNombre{Registro}}
\tadIgualdadObservacional{r}{r'}{registro}{rCampos(r) $\igobs$ rCampos(r') $\land_L$ (\paratodo{campo}{c})(c $\in$ rCampos(r) $\implies$ rValor(r, c) $\igobs$ rValor(r', c))}

\tadGeneros{registro}
\tadExporta{registro, generadores, observadores, otras operaciones}
\tadUsa{\tadNombre{Campo}, \tadNombre{Valor}, \tadNombre{Conj}}

\tadObservadores
\tadOperacion{rValor}{registro/r, campo/c}{valor}{rTieneCampo(r,c)}
\tadOperacion{rCampos}{registro/r}{conj(campo)}{}

\tadGeneradores
\tadOperacion{nuevoRegistro}{}{registro}{}
\tadOperacion{agregarValor}{registro/r, campo/c, valor/v}{registro}
    {(($\forall$ c' : campo, c' $\in$ rCampos(r)) cNombre(c) $\neq$ cNombre(c'))
        \\
    $\land$ (cEsString?(c) $\iff$ vEsString?(v))}

\tadOtrasOperaciones
\tadOperacion{quitarRegistros}{conj(registro), campo/c, valor/v}{conj(registro)}
    {c $\in$ rCampos(r) $\land$ (cEsString?(c) $\iff$ vEsString?(v))}

\tadAxiomas[\paratodo{registro}{r}, \paratodo{valor}{v}, \paratodo{campo}{c}]
\tadAxioma{rValor(agregarValor(r, c, v), c')}{
    \IF c == c' THEN
        v
    ELSE
        rValor(r, c')
    FI
}
\tadAxioma{rCampos(nuevoRegistro)}{$\emptyset$}
\tadAxioma{rCampos(agregarValor(r, c, v))}{Ag(c, rCampos(r))}
\tadAxioma{quitarRegistros(registros, c, v)}{
    \IF $\emptyset$?(rs) THEN
        $\emptyset$
    ELSE
        {\IF c $\in$ rCampos(dameUno(rs)) $\land_L$ v = rValor(dameUno(rs),c) THEN
            Ag(dameUno(rs),quitarRegistros(sinUno(rs), c, v))
        ELSE quitarRegistros(sinUno(rs), c, v) 
        FI}
    FI
}

\end{tad}

