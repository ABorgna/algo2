\section{TAD \tadNombre{Registro}} 
\begin{tad}{\tadNombre{Registro}}

\tadIgualdadObservacional{r}{r'}{registro}{
    rCampos($r$) $\igobs$ rCampos($r'$) $\land_L$ \\
    (\paratodo{campo}{c}, $c \in$ rCampos($r$))
    rValor($r$, $c$) $\igobs$ rValor($r'$, $c$)
}

\tadGeneros{registro}
\tadExporta{registro, generadores, observadores, otras operaciones}
\tadUsa{\tadNombre{Campo}, \tadNombre{Valor}, \tadNombre{Conj}}

\tadObservadores
\tadOperacion{rValor}{registro/r, campo/c}{valor}{$c \in$ rCampos($r$)}
\tadOperacion{rCampos}{registro/r}{conj(campo)}{}

\tadGeneradores
\tadOperacion{nuevoRegistro}{}{registro}{}
\tadOperacion{agregarValor}{registro/r, campo/c, valor/v}{registro}
    {(($\forall c'$ : campo, $c'$ $\in$ rCampos($r$)) cNombre($c$) $\neq$ cNombre($c'$))
        \\
    $\land$ (cEsString?($c$) $\iff$ vEsString?($v$))}

\tadOtrasOperaciones
\tadOperacion{quitarRegistros}{conj(registro)/rs, campo/c, valor/v}{conj(registro)}
    {($\forall r$ : registro, $r \in rs$) % 
        $c$ $\in$ rCampos($r$) $\land$ (cEsString?($c$) $\iff$ vEsString?($v$))%
    }
\tadOperacion{unionRegistros}{registro, registro}{registro}{}
\tadOperacion{unCampo}{registro/r}{campo}{$\neg$rVacio?(r)}
\tadOperacion{unValor}{registro/r}{valor}{$\neg$rVacio?(r)}
\tadOperacion{sinUno}{registro/r}{registro}{$\neg$rVacio?(r)}
\tadOperacion{rVacio?}{registro}{bool}{}
\tadOperacion{mismosValores}{registro/r1, registro/r2, conj(campo)/cs}{bool}{
    $cs \subseteq$ rCampos(r1) $\land$ $cs \subseteq$ rCampos(r2)
}

\tadAxiomas[\paratodo{registro}{r}, \paratodo{valor}{v}, \paratodo{campo}{c}]
\tadAxioma{rValor(agregarValor(r, c, v), c')}{
    \IF c = c' THEN
        v
    ELSE
        rValor(r, c')
    FI
}
\tadAxioma{rCampos(nuevoRegistro)}{$\emptyset$}
\tadAxioma{rCampos(agregarValor(r, c, v))}{Ag(c, rCampos(r))}
\tadAxioma{quitarRegistros(rs, c, v)}{
    \IF $\emptyset$?(rs) THEN
        $\emptyset$
    ELSE
        {\IF c $\in$ rCampos(dameUno(rs)) $\land_L$ v = rValor(dameUno(rs),c) THEN
            Ag(dameUno(rs),quitarRegistros(sinUno(rs), c, v))
        ELSE
            quitarRegistros(sinUno(rs), c, v) 
        FI}
    FI
}
\tadAxioma{unionRegistros(r, nuevoRegistro)}{r}
\tadAxioma{unionRegistros(r, agregarValor(r',c,v))}{
    \IF ($\forall$ c' : campo, c' $\in$ rCampos(r)) cNombre(c) $\neq$ cNombre(c') THEN
        agregarValor(unionRegistros(r,r'),c,v)
    ELSE
        unionRegistros(r,r')
    FI
}

\tadAxioma{rVacio?(nuevoRegistro)}{true}
\tadAxioma{rVacio?(agregarValor(r, c, v))}{false}

\tadAxioma{unCampo(r) $\in$ rCampos(r)}{true}
\tadAxioma{unValor(r)}{rValor(r,unCampo(r))}
\tadAxioma{rCampos(sinUno(r))}{rCampos(r) - \{unCampo(r)\}}
\tadAxioma{mismosValores(r,sinUno(r),rCampos(sinUno(r)))}{true}

\tadAxioma{mismosValores(r1,r2,cs)}{
    \IF $\emptyset$?(cs) THEN
        true
    ELSE
        rValor(r1,dameUno(cs)) $=$ rValor(r2,dameUno(cs)) $\land$ 
        mismosValores(r1,r2,sinUno(cs))
    FI
}

\end{tad}

